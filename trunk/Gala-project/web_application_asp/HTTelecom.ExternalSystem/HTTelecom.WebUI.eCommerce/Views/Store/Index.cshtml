@*@using MvcPaging*@
@using PagedList;
@using PagedList.Mvc;
@{
    var store = (HTTelecom.Domain.Core.DataContext.mss.Store)ViewBag.Store;
    ViewBag.Back = Url.Action("Index", "Home");
    var ListOtherStore = (List<HTTelecom.Domain.Core.DataContext.mss.Store>)ViewBag.ListOtherStore;
    var LstStoreInMedia = (List<HTTelecom.Domain.Core.DataContext.mss.StoreInMedia>)ViewBag.LstStoreInMedia;
    var bannerStore = LstStoreInMedia.Where(n => n.Media.MediaType.MediaTypeCode == "STORE-1").ToList();
    ViewBag.LayoutTitle = store.MetaTitle; ViewBag.LayoutKeywords = store.MetaKeywords; ViewBag.LayoutDescription = store.MetaDescription; ViewBag.Layout_ogTitle = store.MetaTitle; if (bannerStore.Count > 0) { ViewBag.Layout_image = HTTelecom.WebUI.eCommerce.Common.HTXoneServer.Connect + bannerStore.FirstOrDefault().Media.Url + bannerStore.FirstOrDefault().Media.MediaName; } ViewBag.Layout_description = store.MetaDescription;
}
<ul class="user-breadcrumbs-layout">
    <li style=" height: 34px;">
        <a href="@Url.Action("Index","Home")">
            <i class="fa-icon fa-icon-home-102" style="transform: scale(0.5); -ms-transform: scale(.5); -webkit-transform: scale(.5); -moz-transform: scale(.5); -o-transform: scale(.5); -webkit-transform: scale(.5); "></i>
        </a>
    </li>
    <li><a class="current">@store.StoreName</a></li>
</ul>
<div class="row user-margin-bottom-0 user-margin-5 user-border-radius-5" style="background-color: white; border: 1px solid #c5c5c5; overflow: hidden;">
    <div class="col s12 m12 user-position-relative user-padding-0" style="height:auto;">
        @if (ListOtherStore[0].StoreId != null && ListOtherStore[0].StoreId != 0)
        {
    <a href="@Url.Action("Index", "Store", new { id = ListOtherStore[0].StoreId, urlName = ListOtherStore[0].Alias })">
        <span style="position: absolute;width: 30px;height: 30px;top: 50%;left: 20px;margin-top: -15px;">
            <i class="fa-icon fa-icon-left-127" style="font-size: 32px;  transform: scale(1.05);"></i>
        </span>
    </a>
        }
        <h4 class="page-title user-text-center user-margin-bottom-0 user-margin-top-0" title="@store.StoreName" style="line-height:0px;">
            @if (bannerStore.Count > 0)
            {
            <img class="user-col-0 user-afterloadImage" data-original="@(HTTelecom.WebUI.eCommerce.Common.HTXoneServer.Connect + bannerStore.FirstOrDefault().Media.Url + bannerStore.FirstOrDefault().Media.MediaName)" />}
            else
            {@Html.Raw(store.StoreComplexName)}
        </h4>
        @if (ListOtherStore[1].StoreId != null && ListOtherStore[1].StoreId != 0)
        {
    <a href="@Url.Action("Index", "Store", new { id = ListOtherStore[1].StoreId, urlName = ListOtherStore[1].Alias })">
        <span style="position: absolute;width: 30px;height: 30px;top: 50%;right: 20px;margin-top: -15px;"><i class="fa-icon fa-icon-right-125" style="font-size: 32px;transform: scale(1.05);"></i></span>
    </a>
        }
    </div><div class="clearfix"></div>
</div>
@if (ViewBag.showStore == true)
{
    var vendor = (HTTelecom.Domain.Core.DataContext.cis.Vendor)ViewBag.Vendor;
    var lstProduct = (IPagedList<HTTelecom.Domain.Core.DataContext.mss.ProductInMedia>)ViewBag.LstProductInMedia;
    var lstWishList = (List<HTTelecom.Domain.Core.DataContext.cis.Wishlist>)ViewBag.WishLists;
    var lstBanner = (List<HTTelecom.Domain.Core.DataContext.mss.ProductInMedia>)ViewBag.lstProductInMediaBanner;
    if (lstBanner.Count > 0)
    {
        <div class="row user-margin-bottom-0 user-margin-5 backgournd-color-white user-border-radius-5">
            <div class="col s12 m12 user-padding-0" style="position:relative;">
                <span style="position: absolute; top: 10px; right: 20px; width: 25px; height: 25px; z-index: 9;" id="btn-full-screen" data-target="show-full-screen">
                    <img src="~/Images/zoom.png" style=" width: 25px; height: 25px;" />
                </span>
                <div class="swiper-container user-SliderProduct user-SliderProduct-List show-full-screen">
                    @{Html.RenderPartial("~/Views/Shared/Template/_PartialList.cshtml", new Tuple<List<HTTelecom.Domain.Core.DataContext.mss.ProductInMedia>, bool>(lstBanner, true));}
                    @*<div class="swiper-pagination swiper-pagination-white"></div>*@
                    <div class="swiper-button-next swiper-button-next-swiper1 swiper-button-white user-swiper-button-next-prev"></div>
                    <div class="swiper-button-prev swiper-button-prev-swiper1 swiper-button-white user-swiper-button-next-prev"></div>
                </div>
            </div>
            <div class="clearfix"></div>
            <p class="user-text-center user-padding-10" style="margin: 8px 20px 0px 20px; color: #0A8255; border-top: 1px solid #0A8255; ">
                @((string)ViewBag.multiRes.GetString("store_id", ViewBag.CultureInfo)):
                <span class="user-color-main" data-element="color">@String.Format("S{0:000000}", store.StoreId)</span>
            </p>
        </div>
    }
    @*<div class="row user-margin-bottom-0 user-margin-10">
            <p class="user-text-right user-margin-0">
                @((string)ViewBag.multiRes.GetString("store_id", ViewBag.CultureInfo)):
                <span class="user-color-main" data-element="color">@String.Format("S{0:000000}", store.StoreId)</span>
            </p>
        </div>*@
    <div class="row user-margin-5 backgournd-color-white user-border-radius-5" style="border:1px solid #c5c5c5;">
        <h4 class="header center user-color-main user-text-left user-padding-left-5 user-title-compoment" data-element="color" style="margin: 0px 10px;">
            @((string)ViewBag.multiRes.GetString("information", ViewBag.CultureInfo))
            <a class="user-mini-div user-hidden cursor-point" data-type="user-mini-div" data-target="Description">
                <i class="fa-icon fa-icon-minus-63 right" style="transform: scale(0.5);"></i>
            </a>
        </h4>
        <div class="col s12 m12 user-padding-10">
            @if (store.Description != null)
            {
                if (store.Description.Length > 200)
                {
            <div class="raw-html" style="overflow: hidden; height: 100px;" data-target="Description" data-flag="false">
                @Html.Raw(System.Web.HttpUtility.HtmlDecode(store.Description.Replace("../../", HTTelecom.WebUI.eCommerce.Common.HTXoneServer.Connect + "/")))
            </div>
            <p class="user-text-right ">
                <a class="user_read_more cursor-point backgournd-color-black" data-type="user-show-div" data-target="Description" data-x="@((string)ViewBag.multiRes.GetString("view_more", ViewBag.CultureInfo))" data-y="@((string)ViewBag.multiRes.GetString("view_less", ViewBag.CultureInfo))">
                    @((string)ViewBag.multiRes.GetString("view_more", ViewBag.CultureInfo))
                </a>
            </p>
                }
                else
                {
            @Html.Raw(System.Web.HttpUtility.HtmlDecode(store.Description))
                }
            }
        </div>
    </div>
    if (lstProduct.Count > 0)
    {
        <div class="row user-margin-5 backgournd-color-white user-border-radius-5" style="border:1px solid #c5c5c5;">
            <h4 class="header center user-color-main user-text-left user-padding-left-5 user-title-compoment" data-element="color" style="margin: 0px 10px;">
                @((string)ViewBag.multiRes.GetString("product", ViewBag.CultureInfo))
            </h4>
            @*<div class="col s12 m12 user-SliderHome-Store">
                    <div class="swiper-container user-SliderProduct1 user-reponsive-listProductInStore" style="height: 1656px;">
                            <div class="swiper-wrapper">
                                @{var f = 0;}
                                @for (int i = 0; i <= lstProduct.Count / 6; i++)
                                {
                                    f = i * 6;
                                    var l = lstProduct.Count - (f + 5) > 5 ? f + 5 : lstProduct.Count - 1;
                                    var hrefProduct = lstProduct[i].Product.ProductTypeCode == "PT1" ? "OrdProduct" : lstProduct[i].Product.ProductTypeCode == "PT2" ? "SaleProduct" : lstProduct[i].Product.ProductTypeCode == "PT3" ? "ChargeProduct" : "FreeProduct";
                                <div class="swiper-slide">
                                    @for (int j = f; j <= l; j++)
                                        {
                                            var itemWishList = lstWishList.Where(n => n.ProductId == lstProduct[j].ProductId && n.IsActive == true).ToList();
                                        <div class="col s12 m6 l4 swiper-lazy" style="padding:3px;">
                                            <div class="card " style="margin:5px 0px;">
                                                <div class="card-image user-text-center" style="height:200px;">
                                                    <a href="@Url.Action(hrefProduct, "Product", new { id = lstProduct[j].Product.ProductId, urlName = lstProduct[j].Product.Alias, urlNameStore = lstProduct[j].Product.Store.Alias })"><img src="@(HTTelecom.WebUI.eCommerce.Common.HTXoneServer.Connect + lstProduct[j].Media.Url + lstProduct[j].Media.MediaName)" class="swiper-lazy"></a>
                                                </div>
                                                <div class="card-content" style="  padding: 5px">
                                                    <p style="padding:15px;">
                                                        <a style="color:#000" href="@Url.Action(hrefProduct, "Product", new { id = lstProduct[j].Product.ProductId, urlName = lstProduct[j].Product.Alias, urlNameStore = lstProduct[j].Product.Store.Alias })">@lstProduct[j].Product.ProductName</a>
                                                        <a class="right cursor-point btnAddToWishlist" data-id="@lstProduct[j].ProductId" data-url="@Url.Action("AddToWishlist", "Product", new { id = lstProduct[j].ProductId })" data-value='@(itemWishList.Count>0?"false":"true")' data-redirect="@Url.Action("Login", "Customer", new { ur = Url.Action("Index", "Home") })" data-x="fa fa-heart-o" data-y="fa fa-heart" style="font-size:25px;color:red;" title="@((string)ViewBag.multiRes.GetString("wishlist", ViewBag.CultureInfo))">
                                                            @(itemWishList.Count == 0 ? Html.Raw("<i class='fa fa-heart-o'></i>") : Html.Raw("<i class='fa fa-heart'></i>"))
                                                        </a>
                                                    </p>
                                                    @if (lstProduct[j].Product.PromotePrice.HasValue == true && lstProduct[j].Product.PromotePrice.Value < lstProduct[j].Product.MobileOnlinePrice.Value)
                                                        {
                                                        <a class="left " style=" font-size: 14px; color: black; text-decoration: line-through;">@string.Format("{0:0,0 đ}", lstProduct[j].Product.MobileOnlinePrice)</a>
                                                        <a class="right user-color-red" style="font-size:18px;font-weight:bolder;">@string.Format("{0:0,0 đ}", lstProduct[j].Product.PromotePrice)</a>
                                                        }
                                                    else
                                                    {
                                                        <a class="right user-color-red" style="font-size: 18px; font-weight: bolder;">@string.Format("{0:0,0 đ}", lstProduct[j].Product.MobileOnlinePrice)</a>
                                                    }
                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>
                                        </div>
                                        }
                                </div>
                                }
                            </div>
                            <div class="swiper-pagination1 swiper-pagination-white" style=" margin-top: -21px; text-align: center; position: absolute; z-index: 99; width: 100%;"></div>
                            <div class="swiper-button-next swiper-button-next-swiper2 swiper-button-white"></div>
                            <div class="swiper-button-prev swiper-button-prev-swiper2 swiper-button-white"></div>
                        </div>
                </div>*@

            <div class="col s12 m12" style="padding:0px 3px;">
                <div class="row user-margin-0 user-padding-top-5">
                    @foreach (var item in lstProduct)
                    {
                        var hrefProduct = item.Product.ProductTypeCode == "PT1" ? "OrdProduct" : item.Product.ProductTypeCode == "PT2" ? "SaleProduct" : item.Product.ProductTypeCode == "PT3" ? "ChargeProduct" : "FreeProduct";
                        var itemWishList = lstWishList.Where(n => n.ProductId == item.ProductId && n.IsActive == true).ToList();
                        double discount = 0;
                        var s = "sale_dong_2.png";
                        var open = "";
                        if (item.Product.MobileOnlinePrice.HasValue && item.Product.PromotePrice.HasValue && item.Product.MobileOnlinePrice != 0 && item.Product.PromotePrice < item.Product.MobileOnlinePrice)
                        {
                            discount = 100 - Convert.ToDouble((item.Product.PromotePrice * 100 / item.Product.MobileOnlinePrice));
                            s = "sale_2.png";
                            open = "open";
                        }
                        <a href="@Url.Action(hrefProduct, "Product", new { id = item.Product.ProductId, urlName = item.Product.Alias, urlNameStore = item.Product.Store.Alias })">
                            <div class="col s6 m4 l2 itemStoreReponsive" style="padding: 0px 3px; margin-bottom: 5px; ">
                                <div class="card" style="box-shadow: none; height: 100%; border: 1px solid #c5c5c5;">
                                    <div class="card-image">
                                        <img src="@(HTTelecom.WebUI.eCommerce.Common.HTXoneServer.Connect + item.Media.Url  + item.Media.MediaName)" style="height: auto; width: 100%;">
                                    </div>
                                    <div class="card-action" style="border-top:0px;padding:0px 5px;">
                                        <div class="user-color-blank" style="padding: 0px; overflow: hidden; max-height: 32px; height: 32px; text-align: center; width: 100%;">
                                            @item.Product.ProductName
                                        </div>
                                        <div class="clearfix"></div>
                                        <div style="text-align: left;" class="content-price-reponsive">
                                            @if (item.Product.PromotePrice.HasValue == true && item.Product.PromotePrice.Value < item.Product.MobileOnlinePrice.Value)
                                            {
                                                <span class="user-text-lowercase" style=" font-size: 11px; color: black; text-decoration: line-through; margin: 0px;">
                                                    @string.Format("{0:0,0 đ}", item.Product.MobileOnlinePrice)
                                                </span>
                                                <span class="user-color-red user-text-lowercase" style=" font-size: 13px; font-weight: bold; margin: 0px; float: left; width: 100%; ">
                                                    @string.Format("{0:0,0 đ}", item.Product.PromotePrice)
                                                </span>
                                            }
                                            else
                                            {
                                                <span style="font-size: 11px; color: black;">&nbsp;</span>
                                                <span class="user-color-red user-text-lowercase" style="font-size: 13px; font-weight: bold; margin: 0px; float: left; width: 100%; ">
                                                    @string.Format("{0:0,0 đ}", item.Product.MobileOnlinePrice)
                                                </span>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    }
                </div>
                <div class="col s12 text-center">
                    @Html.PagedListPager(lstProduct, page => Url.Action("Index", "Store", new { id = store.StoreId, page = page, urlName = store.Alias }), PagedListRenderOptions.OnlyShowFivePagesAtATime)
                </div>
            </div><div class="clearfix"></div>
        </div>
    }
    if (((List<HTTelecom.Domain.Core.DataContext.mss.ProductInMedia>)ViewBag.ListProductViewed).Count > 0)
    {
        <div class="row user-margin-5 backgournd-color-white user-border-radius-5" style="box-shadow: 1px 1px 1px 1px #c3c3c3;">
            <h4 class="header center user-color-main user-text-left user-padding-left-5 user-title-compoment" data-element="color" style="margin: 0px 10px;">
                @((string)ViewBag.multiRes.GetString("viewed_product", ViewBag.CultureInfo))
            </h4>
            <div class="col s12 m12 user-SliderProduct-Product user-padding-0">
                <div class="swiper-container user-SliderProduct user-SliderProduct-view" style="height: 157px;">
                    @{Html.RenderPartial("~/Views/Shared/Template/_PartialSwip.cshtml", new List<HTTelecom.Domain.Core.DataContext.mss.ProductInMedia>(ViewBag.ListProductViewed));}
                    <div class="swiper-button-next swiper-button-next-swiper-view swiper-button-white user-swiper-button-next-prev"></div>
                    <div class="swiper-button-prev swiper-button-prev-swiper-view swiper-button-white user-swiper-button-next-prev"></div>
                </div>
            </div>
        </div>
    }
    @*<div class="row backgournd-color-white user-margin-10">
            <div class="col s12 m12 user-borderBottom-color-main user-margin-bottom-10" data-element="border-bottom"><h5 class="user-text-uppercase" style="font-size: 18px;">@((string)ViewBag.multiRes.GetString("contact_store", ViewBag.CultureInfo))</h5></div><div class="col s12 m12">
                @if (vendor != null)
                {
                    <table class="hoverable">
                        <tbody>
                            <tr><td>Email:</td><td>@vendor.VendorEmail</td></tr>
                        </tbody>
                    </table>if (vendor.VendorAddress != null)
                    {
                        var indexVendor = 1;
                        <table>
                            <thead>
                                <tr>
                                    <th>
                                    </th>
                                    <th>@((string)ViewBag.multiRes.GetString("address", ViewBag.CultureInfo))</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in vendor.VendorAddress)
                                {
                                    <tr><td class="user-font-bold user-padding-0">@((string)ViewBag.multiRes.GetString("branch", ViewBag.CultureInfo)) @indexVendor</td><td class="user-padding-0"><p>@((string)ViewBag.multiRes.GetString("address", ViewBag.CultureInfo)): @item.Address</p><p>@((string)ViewBag.multiRes.GetString("phone", ViewBag.CultureInfo)): @item.Telephone</p><p>@((string)ViewBag.multiRes.GetString("mobile_phone", ViewBag.CultureInfo)): @item.Mobilephone</p></td></tr>indexVendor++;
                                }
                            </tbody>
                        </table>}
                }
            </div>
        </div>*@
    @section JavaScript {
        @if (ViewBag.showStore == true)
        {
            <script>
                ; $(window).load(function () { equalheight('.itemStoreReponsive'); });
                $(window).resize(function () { equalheight('.itemStoreReponsive'); });
                var swiper1 = new Swiper('.user-SliderProduct-List', {
                    nextButton: '.swiper-button-next-swiper1', prevButton: '.swiper-button-prev-swiper1',
                    //pagination: '.swiper-pagination',
                    paginationClickable: true,
                    preloadImages: false,
                    autoplayDisableOnInteraction: false,
                    lazyLoading: true, loop: true,
                    autoplay: 5000
                });
                var swiper_view = new Swiper('.user-SliderProduct-view', {
                    nextButton: '.swiper-button-next-swiper-view',
                    prevButton: '.swiper-button-prev-swiper-view',
                    slidesPerView: 'auto',
                    centeredSlides: false,
                    freeMode: true,
                    spaceBetween: 0,
                    paginationClickable: true
                });
            </script>
            <style>
                .body {
                    background-color: #F0FEFE;
                }

                .swiper-pagination-white .swiper-pagination-bullet-active {
                    background: #FF8600 !important;
                }

                .swiper-pagination-white .swiper-pagination-bullet {
                    background: black;
                }

                .pagination {
                    margin:0px;
                    display: inline-block;
                }

                    .pagination li.active {
                        background-color: black;
                        border-radius: 50%;
                    }

                    .pagination li a {
                        line-height: 1.8;
                    }
            </style>
        }



    }
}
else
{
    <div class="col s12">
        <p class="user-text-center" style="font-size:40px;">@store.StoreName is coming soon in...</p><ul class="storeStart"><li><span class="days">00</span><p class="days_ref">days</p></li><li class="seperator">.</li><li><span class="hours">00</span><p class="hours_ref">hours</p></li><li class="seperator">:</li><li><span class="minutes">00</span><p class="minutes_ref">minutes</p></li><li class="seperator">:</li><li><span class="seconds">00</span><p class="seconds_ref">seconds</p></li></ul>
    </div>
    @section JavaScript {
        <script>
            ; var d = new Date();
            $('.storeStart').downCount({ date: '@store.OnlineDate.Value.ToString("MM/dd/yyyy 00:00:00")', offset: (d.getTimezoneOffset() / 60) }, function () { });
        </script>
    }
}


